
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="纪博文的个人网站">
      
      
        <meta name="author" content="纪博文">
      
      
        <link rel="canonical" href="https://Sakura-Ji.github.io/EmbeddedSyS/STM32/ADC/">
      
      
        <link rel="prev" href="../USART/">
      
      
        <link rel="next" href="../I2C/">
      
      
      <link rel="icon" href="../../../images/Cat.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>STM32之ADC数模转换 - Sakura-Ji</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/primarycolor.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="pink">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adc-" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Sakura-Ji" class="md-header__button md-logo" aria-label="Sakura-Ji" data-md-component="logo">
      
  <img src="../../../images/Cat.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sakura-Ji
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              STM32之ADC数模转换
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Sakura-Ji/Sakura-Ji.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Sakura-Ji.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  简介

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Programing_Language/Introduction/" class="md-tabs__link">
          
  
    
  
  编程语言

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../LinuxSystem/Lintroduct/" class="md-tabs__link">
          
  
    
  
  Linux系统

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../Eintroduct/" class="md-tabs__link">
          
  
    
  
  嵌入式编程

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../MindMaps/Mind/" class="md-tabs__link">
          
  
    
  
  思维导图

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Tool/MapDepot/" class="md-tabs__link">
          
  
    
  
  GodTool

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Sakura-Ji" class="md-nav__button md-logo" aria-label="Sakura-Ji" data-md-component="logo">
      
  <img src="../../../images/Cat.png" alt="logo">

    </a>
    Sakura-Ji
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Sakura-Ji/Sakura-Ji.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Sakura-Ji.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    简介
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    编程语言
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            C
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/C_language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模板
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    main
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/pointer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    指针
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/array/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数组
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    链表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/floder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    堆栈
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/C/keywords/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模块
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    WebDesign
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            WebDesign
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/WebDesign/WebIntro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于前端
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Html
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Html
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/WebDesign/HtmlLearn/HtmlFir/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    这里记录Html
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CSS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            CSS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programing_Language/WebDesign/CssLearn/CssFir/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    这里记录学习Css
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Linux系统
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Linux系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/Lintroduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linuxconfig
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/Gccinfo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gcc编译器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/Makefile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MakeFile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/File/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/Multi-process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux进程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/Communication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux通信
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/Posix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux线程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/Internet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux网路
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    网络聊天室
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            网络聊天室
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/WebChatMind/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    思维导图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../LinuxSystem/WebChatCode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    代码解析
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    嵌入式编程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            嵌入式编程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Eintroduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Embedded System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C51
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            C51
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../C51/C51Introd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介绍C51
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    STM32
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            STM32
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../STM32Introd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32的介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../KeilUse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keil5的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../FirstFile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    新建第一个程序模板
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../GPIO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之GPIO外设
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../EXTI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之EXTI外部中断
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../TIM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之TIM定时器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../USART/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之USART串口通信
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    STM32之ADC数模转换
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    STM32之ADC数模转换
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adc" class="md-nav__link">
    ADC介绍
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc_1" class="md-nav__link">
    ADC如何实现数模转换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stm32-adc" class="md-nav__link">
    STM32--ADC外设
  </a>
  
    <nav class="md-nav" aria-label="STM32--ADC外设">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adc_2" class="md-nav__link">
    ADC的结构框图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_3" class="md-nav__link">
    ADC的输入通道
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_4" class="md-nav__link">
    ADC的规则转换模式
  </a>
  
    <nav class="md-nav" aria-label="ADC的规则转换模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    单次转换非扫描模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    连续转换非扫描模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    单次转换扫描模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    连续转换扫描模式
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_5" class="md-nav__link">
    ADC的触发控制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_6" class="md-nav__link">
    ADC的数据处理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_7" class="md-nav__link">
    ADC的转换时间
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_8" class="md-nav__link">
    ADC的自校准
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_9" class="md-nav__link">
    ADC的相关应用电路
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc_10" class="md-nav__link">
    ADC的实战演习
  </a>
  
    <nav class="md-nav" aria-label="ADC的实战演习">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    单次(连续)转换非扫描模式 -- 电位器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    单次(连续)转换非扫描模式 -- 多通道转换
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc_11" class="md-nav__link">
    ADC库函数
  </a>
  
    <nav class="md-nav" aria-label="ADC库函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rcc_adcclkconfig" class="md-nav__link">
    函数 RCC_ADCCLKConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_regularchannelconfig" class="md-nav__link">
    函数 ADC_RegularChannelConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_init" class="md-nav__link">
    函数 ADC_Init
  </a>
  
    <nav class="md-nav" aria-label="函数 ADC_Init">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adc_inittypedef-structure" class="md-nav__link">
    结构体ADC_InitTypeDef structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_mode" class="md-nav__link">
    参数 ADC_Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_scanconvmode" class="md-nav__link">
    参数 ADC_ScanConvMode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_continuousconvmode" class="md-nav__link">
    参数 ADC_ContinuousConvMode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_externaltrigconv" class="md-nav__link">
    参数 ADC_ExternalTrigConv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_dataalign" class="md-nav__link">
    参数 ADC_DataAlign
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_nbrofchannel" class="md-nav__link">
    参数 ADC_NbrOfChannel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_cmd" class="md-nav__link">
    函数 ADC_Cmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_resetcalibration" class="md-nav__link">
    函数 ADC_ResetCalibration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getresetcalibrationstatus" class="md-nav__link">
    函数 ADC_GetResetCalibrationStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_startcalibration" class="md-nav__link">
    函数 ADC_StartCalibration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getcalibrationstatus" class="md-nav__link">
    函数 ADC_GetCalibrationStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_softwarestartconvcmd" class="md-nav__link">
    函数 ADC_SoftwareStartConvCmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getflagstatus" class="md-nav__link">
    函数 ADC_GetFlagStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getconversionvalue" class="md-nav__link">
    函数 ADC_GetConversionValue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../I2C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之I2C通信
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../SPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之SPI通信
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../OLED/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之OLED
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../LCD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之LCD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../StepMotor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之步进电机
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ESP8266/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之WIFI通信(ESP8266)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../MQTT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STM32之使用MQTT协议连接阿里云物联网平台
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    思维导图
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            思维导图
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../MindMaps/Mind/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sakura_JI的知识库
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    GodTool
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            GodTool
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tool/MapDepot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    依赖于Github图床的个人搭建
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tool/Testool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    特性工具的测试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adc" class="md-nav__link">
    ADC介绍
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc_1" class="md-nav__link">
    ADC如何实现数模转换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stm32-adc" class="md-nav__link">
    STM32--ADC外设
  </a>
  
    <nav class="md-nav" aria-label="STM32--ADC外设">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adc_2" class="md-nav__link">
    ADC的结构框图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_3" class="md-nav__link">
    ADC的输入通道
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_4" class="md-nav__link">
    ADC的规则转换模式
  </a>
  
    <nav class="md-nav" aria-label="ADC的规则转换模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    单次转换非扫描模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    连续转换非扫描模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    单次转换扫描模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    连续转换扫描模式
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_5" class="md-nav__link">
    ADC的触发控制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_6" class="md-nav__link">
    ADC的数据处理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_7" class="md-nav__link">
    ADC的转换时间
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_8" class="md-nav__link">
    ADC的自校准
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_9" class="md-nav__link">
    ADC的相关应用电路
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc_10" class="md-nav__link">
    ADC的实战演习
  </a>
  
    <nav class="md-nav" aria-label="ADC的实战演习">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    单次(连续)转换非扫描模式 -- 电位器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    单次(连续)转换非扫描模式 -- 多通道转换
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc_11" class="md-nav__link">
    ADC库函数
  </a>
  
    <nav class="md-nav" aria-label="ADC库函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rcc_adcclkconfig" class="md-nav__link">
    函数 RCC_ADCCLKConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_regularchannelconfig" class="md-nav__link">
    函数 ADC_RegularChannelConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_init" class="md-nav__link">
    函数 ADC_Init
  </a>
  
    <nav class="md-nav" aria-label="函数 ADC_Init">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adc_inittypedef-structure" class="md-nav__link">
    结构体ADC_InitTypeDef structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_mode" class="md-nav__link">
    参数 ADC_Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_scanconvmode" class="md-nav__link">
    参数 ADC_ScanConvMode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_continuousconvmode" class="md-nav__link">
    参数 ADC_ContinuousConvMode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_externaltrigconv" class="md-nav__link">
    参数 ADC_ExternalTrigConv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_dataalign" class="md-nav__link">
    参数 ADC_DataAlign
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_nbrofchannel" class="md-nav__link">
    参数 ADC_NbrOfChannel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_cmd" class="md-nav__link">
    函数 ADC_Cmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_resetcalibration" class="md-nav__link">
    函数 ADC_ResetCalibration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getresetcalibrationstatus" class="md-nav__link">
    函数 ADC_GetResetCalibrationStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_startcalibration" class="md-nav__link">
    函数 ADC_StartCalibration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getcalibrationstatus" class="md-nav__link">
    函数 ADC_GetCalibrationStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_softwarestartconvcmd" class="md-nav__link">
    函数 ADC_SoftwareStartConvCmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getflagstatus" class="md-nav__link">
    函数 ADC_GetFlagStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc_getconversionvalue" class="md-nav__link">
    函数 ADC_GetConversionValue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="adc-">ADC-数模转换<a class="headerlink" href="#adc-" title="Permanent link">&para;</a></h1>
<p>学习资料：</p>
<ul>
<li><a href="https://www.bilibili.com/video/BV1th411z7sn/?p=21&amp;share_source=copy_web&amp;vd_source=1f86b29b1eacf120a2143333a298e645">江科大STM32入门教程</a></li>
</ul>
<h2 id="adc">ADC介绍<a class="headerlink" href="#adc" title="Permanent link">&para;</a></h2>
<p>ADC 即模拟数字转换器，英文详称 Analog-to-digital converter，可以将外部的模拟信号转换为数字信号。<strong>STM32F103</strong> 系列最少都拥有 2 个 ADC外设，最多拥有3个ADC外设。</p>
<p><strong>ADC的功能特性:</strong></p>
<ul>
<li><strong>输入电压</strong>: ADC 输入范围 VREF–≤VIN≤VREF+，最终还是由 VREF–、VREF+、VDDA 和 VSSA 决定的,VDDA 和 VREF+接 VCC3.3，而 VSSA 和 VREF-是接地，所以 ADC 的输入范 围即 0~3.3V</li>
<li>
<p>ADC 可以<strong>独立使用</strong>，其中 ADC1 和 ADC2 还可以组成<strong>双重模式</strong>（提高采样率）</p>
</li>
<li>
<p>在引脚手册中可发现，ADC1和ADC2引脚是重合的，它们可单独使用亦可以组成双重模式</p>
</li>
<li>双重模式，在双重模式下中还要很多模式，例如同步规则模式（两个ADC不可同时对一个通道进行采样），快速/慢速交叉模式（可对一个通道进行采样，即ADC2立即启动并且ADC1在延迟7个ADC时钟周期后启动。PS:参考看STM32F103中文参考手册 P166 图34 ）等，PS:还需加深理解 <sub>未待完续</sub></li>
<li>
<p>ADC 是<strong>12位逐次逼近型</strong>的模拟数字转换器,</p>
</li>
<li>
<p>ADC的分辨率(采样精度)：12位，即电压范围是0v-3.3v的，转换器就会把0v-3.3v平均分成<span class="arithmatex">\(<span class="arithmatex">\(2^{21} = 4096\)</span>\)</span>份 </p>
</li>
<li>设转换器所得到的值为数字量为x，所求电压值为y  公式是 $$ y = \cfrac {x}{4096}\times3.3$$</li>
<li>
<p>采集的电压为０时，里面的刻度会显示是０，当采集的电压是3.3V时，里面的刻度会显示是$$ 2^{21}-1=4095 $$</p>
</li>
<li>
<p>STM32 的 ADC 最大的转换速率为 1Mhz，也就是转换时间为 1us（在 ADCCLK=14M,采样周期为 1.5 个ADC时钟下得到）</p>
</li>
<li>它有 <strong>18 个通道</strong>，可测量 16 个外部(GPIO)和 2 个内部信号源(温度传感器和内部参考电压)</li>
<li>各通道的 A/D 转换可以<strong>单次、连续、扫描或间断模式</strong>执行</li>
<li>
<p>ADC 的结果可以 <strong>左对齐</strong> 或 <strong>右对齐</strong> 的方式以二进制形式 存储在 32 位数据寄存器中（只有在双重模式下才用到了高16位）</p>
</li>
<li>
<p>左对齐: 二进制数据放在--&gt; 高位</p>
</li>
<li>右对齐: 正常形式放在右边 --&gt;低位</li>
<li>ADC的输入时钟<strong>不得超过14MHz</strong>，它是由PCLK2经分频产生</li>
<li>ADC有一个<strong>内置自校准模式</strong>。校准可大幅减小因内部电容器组的变化而造成的准精度误差</li>
<li>模拟<strong>看门狗</strong>特性允许应用程序检测输入电压是否超出用户定义的高/低阀值</li>
</ul>
<h2 id="adc_1">ADC如何实现数模转换<a class="headerlink" href="#adc_1" title="Permanent link">&para;</a></h2>
<p>以ADC0809芯片来讲解STM32内部的ADC外设是如何实现的(因为STM32并没有画出ADC内部结构)，ADC0809是一种典型的独立的8位A/D转换器芯片，广泛应用于计算机、仪器仪表等领域。</p>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce53c458853aef34d53b/ADC0809.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ADC0809" src="https://pic.imgdb.cn/item/6513ce53c458853aef34d53b/ADC0809.png" /></a></p>
<p><strong>DAC</strong>：数模转换器，内部使用加权电阻网路来实现的转换 PS:更具体的知识点需要再学习，<sub>未待完续</sub></p>
<p><strong>电压比较器</strong>：它可以判断两个输入信号的电压的大小关系，然后输出一个电平来表示谁大谁小，它的两个通道一个是待测电压，另一个就是DAC的输出电压</p>
<p><strong>逐次逼近寄存器SAR：</strong>通过比较器，我们就使SAR来调节DAC的数值使其逐渐和待测电压近似相等</p>
<p><strong>ADC0809是8位的ADC芯片:</strong>采样精度 <span class="arithmatex">\(<span class="arithmatex">\(2^8 - 1 = 255\)</span>\)</span>，逐步逼近法采用2分法，在二进制上的表现就像0~255进行判断，总共找至少找8次就会找到值</p>
<blockquote>
<ol>
<li>1000 0000 = 128 大了</li>
<li>0100 0000 = 64  大了</li>
<li>0010 0000 = 32  小了</li>
<li>0011 0000 = 48 小了</li>
<li>0011 1000 = 56 小了</li>
<li>0011 1100 = 60 小了</li>
<li>0011 1110 = 62 大了</li>
<li>0011 1101 = 61 OK</li>
</ol>
</blockquote>
<p>当然如果说第一次就是128 就找到它的值了，那这不是一次就找到了吗？ 听JKD老师将，是从高到底依次判断8位二进制的每一位的位权，所以是 8个ADC的周期  也就是 虽然第一次就 OK了 但是还是需要 将接下来的每一位都进行判断 (我不是特别理解嗷) 所以下文中 12位的ADC 的 12 + 0.5个周期是采集12位AD时间是固定的(那0.5可能是杂事毕竟一个是理想状态一个是现实情况)</p>
<h2 id="stm32-adc">STM32--ADC外设<a class="headerlink" href="#stm32-adc" title="Permanent link">&para;</a></h2>
<h3 id="adc_2">ADC的结构框图<a class="headerlink" href="#adc_2" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce52c458853aef34d4ff/ADC_Struct.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ADC_Struct" src="https://pic.imgdb.cn/item/6513ce52c458853aef34d4ff/ADC_Struct.png" /></a></p>
<p><strong>规则通道组</strong>：一次性最多选择16个通道，如果一次选择多个通道，最好使用DMA(数据转运小帮手)来配合使用，因为从上图的框图来看，规则通道只有一个数据寄存器，当有新的数据写入时，会覆盖上一次的数据，所以我们应该快速的将上一个通道的数据保存起来</p>
<p><strong>注入通道组</strong>：一次性最多选择4个通道，并且可同时保存4个通道的数据，因为注入组有4个数据寄存器</p>
<p><strong>开始转换ADC的信号：</strong>有两种，因为DAC经常需要固定时间来转换一次</p>
<ul>
<li>第一种是：软件触发，即通过用户写入代码来触发开始ADC转换</li>
<li>第二种是：硬件触发，主要是来自于定时器,也可以选择外部中断触发，PS：最好使用定时器的主模式触发，即通过更新事件的TRGO来触发，因为这样就不会频繁的进入中断来影响主程序的进行</li>
</ul>
<blockquote>
<p><strong>主模式触发DAC的功能：</strong>内部硬件在不受程序的控制下实现自动运行，通过更新事件映射到 触发控制器的TRGO 中，然后TRGO直接接到DAC的触发转换引脚上，整个过程不需要软件的的参与(利用中断机制，当某一条件达成，进入中断控制DAC)，实现了硬件的自动化 -- 可参考我的<a href="https://www.cnblogs.com/Sakura-Ji/p/17723325.html">STM32之定时器 - Sakura_Ji - 博客园</a>那一章节的笔记</p>
</blockquote>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce50c458853aef34d4b7/ADC_STM32Info.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ADC_STM32Info" src="https://pic.imgdb.cn/item/6513ce50c458853aef34d4b7/ADC_STM32Info.png" /></a></p>
<h3 id="adc_3">ADC的输入通道<a class="headerlink" href="#adc_3" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce50c458853aef34d47a/ADC_Channel.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ADC_Channel" src="https://pic.imgdb.cn/item/6513ce50c458853aef34d47a/ADC_Channel.png" /></a></p>
<h3 id="adc_4">ADC的规则转换模式<a class="headerlink" href="#adc_4" title="Permanent link">&para;</a></h3>
<blockquote>
<ul>
<li><strong>EOC 转换结束位 (End of conversion) :</strong> 该位由硬件在(规则或注入)通道组转换结束时设置，由软件清除或由读取ADC_DR时清除 0：转换未完成； 1：转换完成。</li>
<li><strong>使用上DMA 切记</strong> 进入中断后 不要再使用之前的判断条件来获取数据了  因为 <strong>ADC的DR寄存器的读操作会清除EOC（转换结束）标志位,所以ADC的中断服务函数中判断不到EOC标志位</strong>（清除了EOC标志位，但ADC的中断服务函数还是可以正常进入的。只是判断不到EOC标志了)  <strong>举例:</strong></li>
<li>使用 连续转换非扫描的情况下，之前不使用DMA时   进入中断后 是判断<code>ADC_GetITStatus(ADC1, ADC_IT_EOC)==SET</code> 然后才获取/更新 数据 但是在你使用 DMA后 它会自动读取数据 无需再使用中断中的这个判断条件再获取了</li>
</ul>
</blockquote>
<h4 id="_1">单次转换非扫描模式<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce4fc458853aef34d43f/ADC_SingalNoScan.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="https://pic.imgdb.cn/item/6513ce4fc458853aef34d43f/ADC_SingalNoScan.png" style="zoom:50%;" /></a></p>
<p><strong>解释:</strong></p>
<blockquote>
<ul>
<li><strong>单次转换：</strong>每次转换都需要重新触发控制信号</li>
<li><strong>非扫描：</strong>只有第一个序列1的位置有效，也就是只有在序列1位置的通道才是有效的通道</li>
</ul>
</blockquote>
<p><strong>过程展示:</strong></p>
<blockquote>
<ul>
<li>触发转换，ADC会对在序列1中的通道进行模数转换</li>
<li>转换完成后，转换结果将放在数据寄存器里，同时给EOC标志位 <strong>置1</strong>，转换结束</li>
<li>
<p>通过判断EOC标志位是否是1，若标志位为1，可去数据寄存器里读出结果(因为这里就一个通道所以 可认为转换完成即 有数据，但请不要将EOC等同于转换一个通道就会置1，而是将序列表中的通道都转换完成才会置1 它叫 转换完成标志位 不懂请看下面的 单次转换连续模式中的 过程解释)</p>
</li>
<li>
<p>若想再启动一次转换，需要再触发一次</p>
</li>
<li>
<p>若想换其它通道进行转换，需在转换之前，把第一个位置的通道改成其他通道</p>
</li>
</ul>
</blockquote>
<h4 id="_2">连续转换非扫描模式<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce4ec458853aef34d3cd/ADC_ContinuousNoScan.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="https://pic.imgdb.cn/item/6513ce4ec458853aef34d3cd/ADC_ContinuousNoScan.png" style="zoom:50%;" /></a></p>
<p><strong>解释:</strong></p>
<blockquote>
<ul>
<li><strong>连续转换：</strong>在一次转换结束后不会停止，而是立刻开始下一轮的转换，然后一直持续下去，只需要最开始触发一次，就可以一直转换</li>
<li><strong>非扫描：</strong>只有第一个序列1的位置有效，也就是只有在序列1位置的通道才是有效的通道</li>
</ul>
</blockquote>
<p><strong>过程展示:</strong></p>
<blockquote>
<ul>
<li>触发转换，只需要触发一次，ADC会对在序列1中的通道进行模数转换</li>
<li>读取的时候不用判断是否结束，直接从数据寄存器读即可</li>
</ul>
</blockquote>
<h4 id="_3">单次转换扫描模式<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce4dc458853aef34d378/ADC_SingalScan.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="https://pic.imgdb.cn/item/6513ce4dc458853aef34d378/ADC_SingalScan.png" style="zoom:50%;" /></a></p>
<p><strong>解释：</strong></p>
<blockquote>
<ul>
<li>
<p><strong>单次转换：</strong>每次转换都需要重新触发控制信号</p>
</li>
<li>
<p><strong>扫描模式：</strong>现在不仅仅是序列1有效，而是在初始化结构体时由<code>ADC_InitStructure.ADC_NbrOfChannel</code>规定了顺序进行规则转换的 ADC 通道的数目(=序列号)，这个数目的取值范围是 1 到 16，那么在触发时就会转换多少个通道，序列中的通道顺序无规定要求，可随意设置</p>
</li>
</ul>
</blockquote>
<p><strong>过程展示:</strong></p>
<blockquote>
<ul>
<li>触发转换，ADC会对序列1到序列7(以上图作为示例)中的通道进行模数转换</li>
<li>转换完成(这7个通道都进行转换完成)后，转换结果也只有最后一个通道的 即上图中的 通道6 在数据寄存器里，同时给EOC标志位 <strong>置1</strong>，转换结束</li>
<li><strong>EOC是在这7个通道都转换完成后置才置1</strong>(侧面证明了EOC是转换完成标志位，而不是数据寄存器更新标志位)，所以我们需要使用DMA及时将数据移走，防止数据被覆盖，而且在上方的框图中我发现DMA请求信号 从 模数转换器触发的  但是呢 DMA读取数据肯定是从数据寄存器ADC_DR读取的 至于如何判断数据更新了  等DMA更新！   PS:这个地方还需深究等学完DMA看看能不能补充 <sub>未待完续</sub></li>
<li>通过判断EOC标志位是否是1，若标志位为1，就可判断所有通道都转换结束了</li>
<li>若想再启动一次转换，需要再触发一次，不读数据记得 软件清0 EOC</li>
</ul>
</blockquote>
<h4 id="_4">连续转换扫描模式<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce4dc458853aef34d334/ADC_ContinuousScan.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="https://pic.imgdb.cn/item/6513ce4dc458853aef34d334/ADC_ContinuousScan.png" style="zoom:50%;" /></a></p>
<p><strong>解释：</strong></p>
<blockquote>
<ul>
<li>
<p><strong>连续转换：</strong>在一次转换结束后不会停止，而是立刻开始下一轮的转换，然后一直持续下去，只需要最开始触发一次，就可以一直转换</p>
</li>
<li>
<p><strong>扫描模式：</strong>现在不仅仅是序列1有效，而是在初始化结构体时由<code>ADC_InitStructure.ADC_NbrOfChannel</code>规定了顺序进行规则转换的 ADC 通道的数目(=序列号)，这个数目的取值范围是 1 到 16，那么在触发时就会转换多少个通道，序列中的通道顺序无规定要求，可随意设置
</p>
</li>
</ul>
</blockquote>
<p><strong>过程解释:</strong></p>
<blockquote>
<ul>
<li>触发转换，只需要触发一次，ADC会对序列1到序列7(以上图作为示例)中的通道进行模数转换</li>
<li>使用DMA进行读取数据</li>
</ul>
</blockquote>
<h3 id="adc_5">ADC的触发控制<a class="headerlink" href="#adc_5" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce4cc458853aef34d30f/ADC_Trigger.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ADC_Trigger" src="https://pic.imgdb.cn/item/6513ce4cc458853aef34d30f/ADC_Trigger.png" /></a></p>
<blockquote>
<p>以上就是ADC1，2的规则通道开始转换信号</p>
</blockquote>
<h3 id="adc_6">ADC的数据处理<a class="headerlink" href="#adc_6" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/6513ce45c458853aef34d0dc/ADC_DataHandle.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ADC_DataHandle" src="https://pic.imgdb.cn/item/6513ce45c458853aef34d0dc/ADC_DataHandle.png" /></a></p>
<blockquote>
<ul>
<li>
<p>右对齐读数据寄存器，就是转换结果</p>
</li>
<li>
<p>左对齐读取数据寄存器，比实际大16倍 PS: 因为2进制中左移1位 就是 数据乘以2倍</p>
</li>
<li>左对齐应用：不想要这么高的分辨率，你觉得0-4095数太大了，左对齐后取高八位即可，就从12位的ADC退化为8位的ADC精度了</li>
</ul>
</blockquote>
<h3 id="adc_7">ADC的转换时间<a class="headerlink" href="#adc_7" title="Permanent link">&para;</a></h3>
<blockquote>
<ul>
<li>
<p>不需要非常高的转换频率，可以将此时间忽略</p>
</li>
<li>
<p>AD转换的步骤：<strong>1.采样，2.保持，3.量化，4.编码</strong></p>
</li>
<li>
<p>STM32 ADC的总转换时间为：  TCONV = 采样时间(采样+保持时间) + 12.5个ADC周期(12位的ADC需要12个周期 +0.5做其它事情的周期 )</p>
</li>
<li>
<p>采样+保持时间越长，毛刺现象干扰越低，但是会使转换时间增加</p>
</li>
<li>
<p>例如：当ADCCLK=14MHz，采样时间为1.5个ADC周期 ：TCONV = 1.5 + 12.5 = 14个ADC周期 = 1μs</p>
</li>
</ul>
</blockquote>
<h3 id="adc_8">ADC的自校准<a class="headerlink" href="#adc_8" title="Permanent link">&para;</a></h3>
<blockquote>
<ul>
<li>
<p>ADC有一个内置自校准模式。校准可大幅减小因内部电容器组的变化而造成的准精度误差。校准期间，在每个电容器上都会计算出一个误差修正码(数字值)，这个码用于消除在随后的转换中每个电容器上产生的误差</p>
</li>
<li>
<p>建议在每次上电后执行一次校准</p>
</li>
<li>
<p>启动校准前， ADC必须处于关电状态超过至少两个ADC时钟周期</p>
</li>
</ul>
</blockquote>
<h3 id="adc_9">ADC的相关应用电路<a class="headerlink" href="#adc_9" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://pic.imgdb.cn/item/65158f54c458853aefc92571/ADC_Apply.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ADC_Apply" src="https://pic.imgdb.cn/item/65158f54c458853aefc92571/ADC_Apply.png" /></a></p>
<ul>
<li>电位器产生一个可调的电压的电路</li>
</ul>
<blockquote>
<p>中间的滑动端可以输出一个0~3.3伏可调的电压</p>
</blockquote>
<ul>
<li>分压方法输出传感器阻值的电路</li>
</ul>
<blockquote>
<ul>
<li>传感器输出电压的电路，例如光敏电阻、热敏电阻、红外接头管、麦克风等都可以等效为一个可变电阻</li>
<li>那电阻阻值得通过和一个固定电阻串联分压，来得到一个反应电阻值电压的电路</li>
<li>当传感器阻止变小时，下拉作用变强，输出端电压就下降</li>
<li>传当感器组织变大时，下拉作用变弱，输出端受上拉电阻的作用，电压就会升高</li>
<li>固定电阻建议选择和传感器阻值相近的电阻，才可以得到一个位于中间电压区域，比较好的输出</li>
<li>此处传感器和固定电阻的位置也调换，输出电压的极性就反过来了</li>
</ul>
</blockquote>
<ul>
<li>简单的电压转换电路</li>
</ul>
<blockquote>
<ul>
<li>由于ADC只能接收0~3.3V的电压，但是想测一个0-5V的VIN电压，就可以搭建第三种电路</li>
<li>使用电阻分压，上面阻值17K，下面阻值33K，加一起50K，</li>
<li>中间的电压就是VIN/50K*33K,得到的电压范围就是0-3.3伏,就可以进入ADC转换了</li>
<li>想要其他范围（如5V、10V）的VIN电压可类似操作，电压再高一点就不建议了，不安全</li>
</ul>
</blockquote>
<h2 id="adc_10">ADC的实战演习<a class="headerlink" href="#adc_10" title="Permanent link">&para;</a></h2>
<h3 id="-">单次(连续)转换非扫描模式 -- 电位器<a class="headerlink" href="#-" title="Permanent link">&para;</a></h3>
<p>代码为单次转换，连续转换的方法写在了最后，只需要改动三个地方即可，很简单。</p>
<p><code>ADC.h</code></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span>
<span class="normal"><a href="#__codelineno-0-7">7</a></span>
<span class="normal"><a href="#__codelineno-0-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cp">#ifndef  __ADC_H__</span><span class="c1">//如果没有定义了则参加以下编译</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="cp">#define  __ADC_H__</span><span class="c1">//一旦定义就有了定义 所以 其目的就是防止模块重复编译</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;stm32f10x.h&quot;</span><span class="c1"> </span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Adc_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="kt">uint16_t</span><span class="w"> </span><span class="nf">Adc_Getval</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="cp">#endif  </span><span class="c1">//结束编译</span>
</span></code></pre></div></td></tr></table></div>
<p><code>ADC.c</code></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span>
<span class="normal"><a href="#__codelineno-1-32">32</a></span>
<span class="normal"><a href="#__codelineno-1-33">33</a></span>
<span class="normal"><a href="#__codelineno-1-34">34</a></span>
<span class="normal"><a href="#__codelineno-1-35">35</a></span>
<span class="normal"><a href="#__codelineno-1-36">36</a></span>
<span class="normal"><a href="#__codelineno-1-37">37</a></span>
<span class="normal"><a href="#__codelineno-1-38">38</a></span>
<span class="normal"><a href="#__codelineno-1-39">39</a></span>
<span class="normal"><a href="#__codelineno-1-40">40</a></span>
<span class="normal"><a href="#__codelineno-1-41">41</a></span>
<span class="normal"><a href="#__codelineno-1-42">42</a></span>
<span class="normal"><a href="#__codelineno-1-43">43</a></span>
<span class="normal"><a href="#__codelineno-1-44">44</a></span>
<span class="normal"><a href="#__codelineno-1-45">45</a></span>
<span class="normal"><a href="#__codelineno-1-46">46</a></span>
<span class="normal"><a href="#__codelineno-1-47">47</a></span>
<span class="normal"><a href="#__codelineno-1-48">48</a></span>
<span class="normal"><a href="#__codelineno-1-49">49</a></span>
<span class="normal"><a href="#__codelineno-1-50">50</a></span>
<span class="normal"><a href="#__codelineno-1-51">51</a></span>
<span class="normal"><a href="#__codelineno-1-52">52</a></span>
<span class="normal"><a href="#__codelineno-1-53">53</a></span>
<span class="normal"><a href="#__codelineno-1-54">54</a></span>
<span class="normal"><a href="#__codelineno-1-55">55</a></span>
<span class="normal"><a href="#__codelineno-1-56">56</a></span>
<span class="normal"><a href="#__codelineno-1-57">57</a></span>
<span class="normal"><a href="#__codelineno-1-58">58</a></span>
<span class="normal"><a href="#__codelineno-1-59">59</a></span>
<span class="normal"><a href="#__codelineno-1-60">60</a></span>
<span class="normal"><a href="#__codelineno-1-61">61</a></span>
<span class="normal"><a href="#__codelineno-1-62">62</a></span>
<span class="normal"><a href="#__codelineno-1-63">63</a></span>
<span class="normal"><a href="#__codelineno-1-64">64</a></span>
<span class="normal"><a href="#__codelineno-1-65">65</a></span>
<span class="normal"><a href="#__codelineno-1-66">66</a></span>
<span class="normal"><a href="#__codelineno-1-67">67</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ADC.h&quot;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Adc_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="p">{</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">  </span><span class="cm">/*1.开启ADC和GPIO的时钟*/</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">  </span><span class="n">RCC_APB2PeriphClockCmd</span><span class="p">(</span><span class="n">RCC_APB2Periph_GPIOA</span><span class="o">|</span><span class="n">RCC_APB2Periph_ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">);</span><span class="c1">//使能时钟A和ADC1时钟</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="n">RCC_ADCCLKConfig</span><span class="p">(</span><span class="n">RCC_PCLK2_Div6</span><span class="p">);</span><span class="c1">//设置ADC预分频 -- ADC的输入时钟不得超过14M -- 此处是6分频 ADC 12MHZ</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">  </span><span class="cm">/*2.初始化GPIOA*/</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">  </span><span class="c1">//为初始化GPIO函数做准备</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">  </span><span class="n">GPIO_InitTypeDef</span><span class="w"> </span><span class="n">GPIO_InitStructure</span><span class="p">;</span><span class="c1">//定义结构体</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">  </span><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Pin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_Pin_0</span><span class="p">;</span><span class="c1">//设置PA0引脚 -- 也就是ADC1通道0的位置</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">  </span><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_Mode_AIN</span><span class="w"> </span><span class="p">;</span><span class="c1">//设置GPIO为模拟输入</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">  </span><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_Speed_50MHz</span><span class="w"> </span><span class="p">;</span><span class="c1">//设置输出速度为50MHZ</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">  </span><span class="c1">//初始化函数↓</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">  </span><span class="n">GPIO_Init</span><span class="p">(</span><span class="n">GPIOA</span><span class="p">,</span><span class="o">&amp;</span><span class="n">GPIO_InitStructure</span><span class="p">);</span><span class="c1">//初始化</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">  </span><span class="cm">/*2.选择转换的通道*/</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">  </span><span class="cm">/*选择规则组通道 -- 将第0个通道 放到 序列1上  -- 因为我们选择非扫描模式 所以要放到序列1上*/</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">  </span><span class="n">ADC_RegularChannelConfig</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_Channel_0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_SampleTime_55Cycles5</span><span class="p">);</span><span class="c1">//第四个参数是采样时间 -- 如果需要稳定转换 选采样时间长 本示例中无所谓 选择55.5个ADCCLK的采样时间</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">  </span><span class="cm">/*3.ADC初始化*/</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="w">  </span><span class="n">ADC_InitTypeDef</span><span class="w"> </span><span class="n">ADC_InitStructure</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25"></a>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_Mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_Mode_Independent</span><span class="p">;</span><span class="w"> </span><span class="c1">//使用独立模式</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27"></a>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ScanConvMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DISABLE</span><span class="p">;</span><span class="w"> </span><span class="c1">//是否开启扫描模式--否</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29"></a>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ContinuousConvMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DISABLE</span><span class="p">;</span><span class="w"> </span><span class="c1">//选择连续转换还是单次转换</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31"></a>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ExternalTrigConv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_ExternalTrigConv_None</span><span class="p">;</span><span class="c1">//不使用外部触发 -- 使用软件触发</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33"></a>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_DataAlign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_DataAlign_Right</span><span class="p">;</span><span class="w"> </span><span class="c1">//数据对齐--选择右对齐</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35"></a>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_NbrOfChannel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="c1">//这个参数只有在扫描模式才有用 -- 选择通道数目(在非扫描模式下只有序列1才有用)</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37"></a>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="w">  </span><span class="n">ADC_Init</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ADC_InitStructure</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39"></a><span class="w">  </span><span class="cm">/*4.开启ADC--上电*/</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40"></a><span class="w">  </span><span class="n">ADC_Cmd</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="w">  </span><span class="cm">/*5.开启ADC校准*/</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42"></a><span class="w">  </span><span class="n">ADC_ResetCalibration</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="w"> </span><span class="c1">//上电复位校准</span>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="w">  </span><span class="cm">/*</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44"></a><span class="cm">   *RSTCAL：复位校准 (Reset calibration) </span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="cm">   *该位由软件设置并由硬件清除。在校准寄存器被初始化后该位将被清除。</span>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46"></a><span class="cm">   *0：校准寄存器已初始化；</span>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47"></a><span class="cm">   *1：初始化校准寄存器。</span>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48"></a><span class="cm">   *注：如果正在进行转换时设置RSTCAL，清除校准寄存器需要额外的周期。</span>
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49"></a><span class="cm">  */</span>
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="n">ADC_GetResetCalibrationStatus</span><span class="p">(</span><span class="n">ADC2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SET</span><span class="p">){}</span><span class="c1">//获取复位校准后的状态 如果还是1 说明还没有校准成功 则一直等待</span>
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51"></a><span class="w">  </span><span class="n">ADC_StartCalibration</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="c1">//开启校准</span>
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="n">ADC_GetCalibrationStatus</span><span class="p">(</span><span class="n">ADC1</span><span class="p">)</span><span class="o">==</span><span class="n">SET</span><span class="p">){}</span><span class="c1">//获取校准状态 等待校准完成</span>
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53"></a>
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54"></a><span class="p">}</span>
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55"></a>
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56"></a><span class="kt">uint16_t</span><span class="w"> </span><span class="nf">Adc_Getval</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57"></a><span class="p">{</span>
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58"></a><span class="w">  </span><span class="n">ADC_SoftwareStartConvCmd</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="n">ENABLE</span><span class="p">);</span><span class="c1">//软件触发</span>
</span><span id="__span-1-59"><a id="__codelineno-1-59" name="__codelineno-1-59"></a><span class="w">  </span><span class="cm">/*</span>
</span><span id="__span-1-60"><a id="__codelineno-1-60" name="__codelineno-1-60"></a><span class="cm">   *EOC：转换结束位 (End of conversion) </span>
</span><span id="__span-1-61"><a id="__codelineno-1-61" name="__codelineno-1-61"></a><span class="cm">   *该位由硬件在(规则或注入)通道组转换结束时设置，由软件清除或由读取ADC_DR时清除</span>
</span><span id="__span-1-62"><a id="__codelineno-1-62" name="__codelineno-1-62"></a><span class="cm">   *0：转换未完成；</span>
</span><span id="__span-1-63"><a id="__codelineno-1-63" name="__codelineno-1-63"></a><span class="cm">   *1：转换完成。</span>
</span><span id="__span-1-64"><a id="__codelineno-1-64" name="__codelineno-1-64"></a><span class="cm">  */</span>
</span><span id="__span-1-65"><a id="__codelineno-1-65" name="__codelineno-1-65"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="n">ADC_GetFlagStatus</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_FLAG_EOC</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RESET</span><span class="p">){}</span><span class="w"> </span><span class="c1">//等待转换结束 --&gt; 55.5+12.5=68ADCCLK --&gt;1/12MHZ*68 ~ 5.6微秒</span>
</span><span id="__span-1-66"><a id="__codelineno-1-66" name="__codelineno-1-66"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ADC_GetConversionValue</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="c1">//返回  近一次 ADC1 规则组的转换结果</span>
</span><span id="__span-1-67"><a id="__codelineno-1-67" name="__codelineno-1-67"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>main.c</code></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;stm32f10x.h&quot;</span><span class="c1">                  // Device header</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Delay.h&quot;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;OLED.h&quot;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ADC.h&quot;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="kt">uint16_t</span><span class="w"> </span><span class="n">ADCvalue</span><span class="p">;</span><span class="c1">//ADC返回的值</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="kt">float</span><span class="w"> </span><span class="n">Volatge</span><span class="p">;</span><span class="c1">//转换成电压</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="p">{</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">  </span><span class="n">OLED_Init</span><span class="p">();</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">  </span><span class="n">Adc_Init</span><span class="p">();</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">  </span><span class="n">OLED_ShowString</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;ADCValue:&quot;</span><span class="p">);</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">  </span><span class="n">OLED_ShowString</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;Voltage:0.00V&quot;</span><span class="p">);</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">    </span><span class="n">ADCvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Adc_Getval</span><span class="p">();</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">    </span><span class="n">Volatge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">ADCvalue</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4095</span><span class="w"> </span><span class="o">*</span><span class="mf">3.3</span><span class="p">;</span><span class="c1">//不必要太纠结4095 对应3.3V还是4096 -- 0~4095 = 4096</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">    </span><span class="n">OLED_ShowNum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">ADCvalue</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="n">OLED_ShowNum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="n">Volatge</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="c1">//因为OLED.c中未包含显示小数的函数 所以折中了这种办法</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">    </span><span class="n">OLED_ShowNum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">11</span><span class="p">,(</span><span class="kt">uint16_t</span><span class="p">)(</span><span class="n">Volatge</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">)</span><span class="o">%</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">    </span><span class="n">Delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<blockquote>
<p>如果要转换成 连续模式 只需要</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ContinuousConvMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">;</span><span class="w"> </span><span class="c1">//选择连续转换</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="err">···</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="n">ADC_SoftwareStartConvCmd</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="n">ENABLE</span><span class="p">);</span><span class="c1">//软件触发 --将这个函数写到初始化函数Adc_Init的最后</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">while</span><span class="p">(</span><span class="n">ADC_GetFlagStatus</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_FLAG_EOC</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RESET</span><span class="p">){}</span><span class="c1">//注释掉 等待转换结束这个判断 -- 无需判断直接读值</span>
</span></code></pre></div></td></tr></table></div>
</blockquote>
<h3 id="-_1">单次(连续)转换非扫描模式 -- 多通道转换<a class="headerlink" href="#-_1" title="Permanent link">&para;</a></h3>
<p>本章节不使用DMA这个数据转存小帮手，所以不使用扫描模式，因为EOC是在所有有效通道都转换完成才置1，而转换完成其它的通道时既没有标志位也没有中断的产生，所以不好判断是否这个通道转换完了，所以下方的代码采用单次非扫描模式，采用每次触发前改变通道</p>
<p><code>ADC.h</code></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span>
<span class="normal"><a href="#__codelineno-4-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="cp">#ifndef  __ADC_H__</span><span class="c1">//如果没有定义了则参加以下编译</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="cp">#define  __ADC_H__</span><span class="c1">//一旦定义就有了定义 所以 其目的就是防止模块重复编译</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;stm32f10x.h&quot;</span><span class="c1"> </span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Adc_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="kt">uint16_t</span><span class="w"> </span><span class="nf">Adc_Getval</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">ADC_Channel</span><span class="p">);</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="cp">#endif  </span><span class="c1">//结束编译</span>
</span></code></pre></div></td></tr></table></div>
<p><code>ADC.c</code></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span>
<span class="normal"><a href="#__codelineno-5-32">32</a></span>
<span class="normal"><a href="#__codelineno-5-33">33</a></span>
<span class="normal"><a href="#__codelineno-5-34">34</a></span>
<span class="normal"><a href="#__codelineno-5-35">35</a></span>
<span class="normal"><a href="#__codelineno-5-36">36</a></span>
<span class="normal"><a href="#__codelineno-5-37">37</a></span>
<span class="normal"><a href="#__codelineno-5-38">38</a></span>
<span class="normal"><a href="#__codelineno-5-39">39</a></span>
<span class="normal"><a href="#__codelineno-5-40">40</a></span>
<span class="normal"><a href="#__codelineno-5-41">41</a></span>
<span class="normal"><a href="#__codelineno-5-42">42</a></span>
<span class="normal"><a href="#__codelineno-5-43">43</a></span>
<span class="normal"><a href="#__codelineno-5-44">44</a></span>
<span class="normal"><a href="#__codelineno-5-45">45</a></span>
<span class="normal"><a href="#__codelineno-5-46">46</a></span>
<span class="normal"><a href="#__codelineno-5-47">47</a></span>
<span class="normal"><a href="#__codelineno-5-48">48</a></span>
<span class="normal"><a href="#__codelineno-5-49">49</a></span>
<span class="normal"><a href="#__codelineno-5-50">50</a></span>
<span class="normal"><a href="#__codelineno-5-51">51</a></span>
<span class="normal"><a href="#__codelineno-5-52">52</a></span>
<span class="normal"><a href="#__codelineno-5-53">53</a></span>
<span class="normal"><a href="#__codelineno-5-54">54</a></span>
<span class="normal"><a href="#__codelineno-5-55">55</a></span>
<span class="normal"><a href="#__codelineno-5-56">56</a></span>
<span class="normal"><a href="#__codelineno-5-57">57</a></span>
<span class="normal"><a href="#__codelineno-5-58">58</a></span>
<span class="normal"><a href="#__codelineno-5-59">59</a></span>
<span class="normal"><a href="#__codelineno-5-60">60</a></span>
<span class="normal"><a href="#__codelineno-5-61">61</a></span>
<span class="normal"><a href="#__codelineno-5-62">62</a></span>
<span class="normal"><a href="#__codelineno-5-63">63</a></span>
<span class="normal"><a href="#__codelineno-5-64">64</a></span>
<span class="normal"><a href="#__codelineno-5-65">65</a></span>
<span class="normal"><a href="#__codelineno-5-66">66</a></span>
<span class="normal"><a href="#__codelineno-5-67">67</a></span>
<span class="normal"><a href="#__codelineno-5-68">68</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ADC.h&quot;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Adc_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="p">{</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">  </span><span class="cm">/*1.开启ADC和GPIO的时钟*/</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">  </span><span class="n">RCC_APB2PeriphClockCmd</span><span class="p">(</span><span class="n">RCC_APB2Periph_GPIOA</span><span class="o">|</span><span class="n">RCC_APB2Periph_ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">);</span><span class="c1">//使能时钟A和ADC1时钟</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">  </span><span class="n">RCC_ADCCLKConfig</span><span class="p">(</span><span class="n">RCC_PCLK2_Div6</span><span class="p">);</span><span class="c1">//设置ADC预分频 -- ADC的输入时钟不得超过14M -- 此处是6分频 ADC 12MHZ</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">  </span><span class="cm">/*2.初始化GPIOA*/</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">  </span><span class="c1">//为初始化GPIO函数做准备</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">  </span><span class="n">GPIO_InitTypeDef</span><span class="w"> </span><span class="n">GPIO_InitStructure</span><span class="p">;</span><span class="c1">//定义结构体</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">  </span><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Pin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_Pin_0</span><span class="o">|</span><span class="n">GPIO_Pin_1</span><span class="o">|</span><span class="n">GPIO_Pin_2</span><span class="o">|</span><span class="n">GPIO_Pin_3</span><span class="p">;</span><span class="c1">//设置PA0，1，2，3引脚 -- 也就是ADC1通道0，1，2，3的位置</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14"></a>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">  </span><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_Mode_AIN</span><span class="w"> </span><span class="p">;</span><span class="c1">//设置GPIO为模拟输入</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">  </span><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_Speed_50MHz</span><span class="w"> </span><span class="p">;</span><span class="c1">//设置输出速度为50MHZ</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">  </span><span class="c1">//初始化函数↓</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">  </span><span class="n">GPIO_Init</span><span class="p">(</span><span class="n">GPIOA</span><span class="p">,</span><span class="o">&amp;</span><span class="n">GPIO_InitStructure</span><span class="p">);</span><span class="c1">//初始化</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20"></a>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">  </span><span class="cm">/*2.ADC初始化*/</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">  </span><span class="n">ADC_InitTypeDef</span><span class="w"> </span><span class="n">ADC_InitStructure</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23"></a>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_Mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_Mode_Independent</span><span class="p">;</span><span class="w"> </span><span class="c1">//使用独立模式</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25"></a>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ScanConvMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DISABLE</span><span class="p">;</span><span class="w"> </span><span class="c1">//是否开启扫描模式--否</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27"></a>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ContinuousConvMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DISABLE</span><span class="p">;</span><span class="w"> </span><span class="c1">//选择连续转换还是单次转换</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29"></a>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ExternalTrigConv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_ExternalTrigConv_None</span><span class="p">;</span><span class="c1">//不使用外部触发 -- 使用软件触发</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31"></a>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_DataAlign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_DataAlign_Right</span><span class="p">;</span><span class="w"> </span><span class="c1">//数据对齐--选择右对齐</span>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33"></a>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34"></a><span class="w">  </span><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_NbrOfChannel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="c1">//这个参数只有在扫描模式才有用 -- 选择通道数目(在非扫描模式下只有序列1才有用)</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35"></a>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36"></a><span class="w">  </span><span class="n">ADC_Init</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ADC_InitStructure</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37"></a><span class="w">  </span><span class="cm">/*3.开启ADC--上电*/</span>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38"></a><span class="w">  </span><span class="n">ADC_Cmd</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39"></a><span class="w">  </span><span class="cm">/*4.开启ADC校准*/</span>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40"></a><span class="w">  </span><span class="n">ADC_ResetCalibration</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="w"> </span><span class="c1">//上电复位校准</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41"></a><span class="w">  </span><span class="cm">/*</span>
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42"></a><span class="cm">   *RSTCAL：复位校准 (Reset calibration) </span>
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43"></a><span class="cm">   *该位由软件设置并由硬件清除。在校准寄存器被初始化后该位将被清除。</span>
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44"></a><span class="cm">   *0：校准寄存器已初始化；</span>
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45"></a><span class="cm">   *1：初始化校准寄存器。</span>
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46"></a><span class="cm">   *注：如果正在进行转换时设置RSTCAL，清除校准寄存器需要额外的周期。</span>
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47"></a><span class="cm">  */</span>
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="n">ADC_GetResetCalibrationStatus</span><span class="p">(</span><span class="n">ADC2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SET</span><span class="p">){}</span><span class="c1">//获取复位校准后的状态 如果还是1 说明还没有校准成功 则一直等待</span>
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49"></a><span class="w">  </span><span class="n">ADC_StartCalibration</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="c1">//开启校准</span>
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="n">ADC_GetCalibrationStatus</span><span class="p">(</span><span class="n">ADC1</span><span class="p">)</span><span class="o">==</span><span class="n">SET</span><span class="p">){}</span><span class="c1">//获取校准状态 等待校准完成</span>
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51"></a>
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52"></a><span class="p">}</span>
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53"></a>
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54"></a><span class="kt">uint16_t</span><span class="w"> </span><span class="nf">Adc_Getval</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">ADC_Channel</span><span class="p">)</span>
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55"></a><span class="p">{</span>
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56"></a><span class="w">   </span><span class="cm">/*选择转换的通道*/</span>
</span><span id="__span-5-57"><a id="__codelineno-5-57" name="__codelineno-5-57"></a><span class="w">  </span><span class="cm">/*选择规则组通道 因为我们选择非扫描模式 所以要放到序列1上*/</span>
</span><span id="__span-5-58"><a id="__codelineno-5-58" name="__codelineno-5-58"></a><span class="w">  </span><span class="n">ADC_RegularChannelConfig</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_Channel</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_SampleTime_55Cycles5</span><span class="p">);</span>
</span><span id="__span-5-59"><a id="__codelineno-5-59" name="__codelineno-5-59"></a><span class="w">  </span><span class="n">ADC_SoftwareStartConvCmd</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="n">ENABLE</span><span class="p">);</span><span class="c1">//软件触发</span>
</span><span id="__span-5-60"><a id="__codelineno-5-60" name="__codelineno-5-60"></a><span class="w">  </span><span class="cm">/*</span>
</span><span id="__span-5-61"><a id="__codelineno-5-61" name="__codelineno-5-61"></a><span class="cm">   *EOC：转换结束位 (End of conversion) </span>
</span><span id="__span-5-62"><a id="__codelineno-5-62" name="__codelineno-5-62"></a><span class="cm">   *该位由硬件在(规则或注入)通道组转换结束时设置，由软件清除或由读取ADC_DR时清除</span>
</span><span id="__span-5-63"><a id="__codelineno-5-63" name="__codelineno-5-63"></a><span class="cm">   *0：转换未完成；</span>
</span><span id="__span-5-64"><a id="__codelineno-5-64" name="__codelineno-5-64"></a><span class="cm">   *1：转换完成。</span>
</span><span id="__span-5-65"><a id="__codelineno-5-65" name="__codelineno-5-65"></a><span class="cm">  */</span>
</span><span id="__span-5-66"><a id="__codelineno-5-66" name="__codelineno-5-66"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="n">ADC_GetFlagStatus</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_FLAG_EOC</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RESET</span><span class="p">){}</span><span class="w"> </span><span class="c1">//等待转换结束 --&gt; 55.5+12.5=68ADCCLK --&gt;1/12MHZ*68 ~ 5.6微秒</span>
</span><span id="__span-5-67"><a id="__codelineno-5-67" name="__codelineno-5-67"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ADC_GetConversionValue</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="c1">//返回  近一次 ADC1 规则组的转换结果</span>
</span><span id="__span-5-68"><a id="__codelineno-5-68" name="__codelineno-5-68"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>main.c</code></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;stm32f10x.h&quot;</span><span class="c1">                  // Device header</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Delay.h&quot;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;OLED.h&quot;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ADC.h&quot;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="kt">uint16_t</span><span class="w"> </span><span class="n">Adc0</span><span class="p">,</span><span class="n">Adc1</span><span class="p">,</span><span class="n">Adc2</span><span class="p">,</span><span class="n">Adc3</span><span class="p">;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="p">{</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">  </span><span class="n">OLED_Init</span><span class="p">();</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">  </span><span class="n">Adc_Init</span><span class="p">();</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11"></a>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">  </span><span class="n">OLED_ShowString</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;ADC0:&quot;</span><span class="p">);</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">  </span><span class="n">OLED_ShowString</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;ADC1:&quot;</span><span class="p">);</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">  </span><span class="n">OLED_ShowString</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;ADC2:&quot;</span><span class="p">);</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">  </span><span class="n">OLED_ShowString</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;ADC3:&quot;</span><span class="p">);</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">    </span><span class="n">Adc0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Adc_Getval</span><span class="p">(</span><span class="n">ADC_Channel_0</span><span class="p">);</span><span class="c1">//电阻器</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">    </span><span class="n">Adc1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Adc_Getval</span><span class="p">(</span><span class="n">ADC_Channel_1</span><span class="p">);</span><span class="c1">//光敏传感器</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">    </span><span class="n">Adc2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Adc_Getval</span><span class="p">(</span><span class="n">ADC_Channel_2</span><span class="p">);</span><span class="c1">//热敏传感器</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="w">    </span><span class="n">Adc3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Adc_Getval</span><span class="p">(</span><span class="n">ADC_Channel_3</span><span class="p">);</span><span class="c1">//反射式红外传感器</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22"></a>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">    </span><span class="n">OLED_ShowNum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">Adc0</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">    </span><span class="n">OLED_ShowNum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">Adc1</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="w">    </span><span class="n">OLED_ShowNum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">Adc2</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">    </span><span class="n">OLED_ShowNum</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">Adc3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27"></a>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="w">    </span><span class="n">Delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h2 id="adc_11">ADC库函数<a class="headerlink" href="#adc_11" title="Permanent link">&para;</a></h2>
<p>**Table 1. ADC 固件库函数 **</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_DeInit根据</td>
<td>将外设 ADCx 的全部寄存器重设为缺省值</td>
</tr>
<tr>
<td><strong>ADC_Init</strong></td>
<td>ADC_InitStruct 中指定的参数初始化外设 ADCx 的寄存器</td>
</tr>
<tr>
<td>ADC_StructInit</td>
<td>把 ADC_InitStruct 中的每一个参数按缺省值填入</td>
</tr>
<tr>
<td><strong>ADC_Cmd</strong></td>
<td>使能或者失能指定的 ADC</td>
</tr>
<tr>
<td>ADC_DMACmd</td>
<td>使能或者失能指定的 ADC 的 DMA 请求</td>
</tr>
<tr>
<td>ADC_ITConfig</td>
<td>使能或者失能指定的 ADC 的中断</td>
</tr>
<tr>
<td><strong>ADC_ResetCalibration</strong></td>
<td>重置指定的  ADC 的校准寄存器</td>
</tr>
<tr>
<td><strong>ADC_GetResetCalibrationStatus</strong></td>
<td>获取  ADC 重置校准寄存器的状态</td>
</tr>
<tr>
<td><strong>ADC_StartCalibration</strong></td>
<td>开始指定  ADC 的校准程序</td>
</tr>
<tr>
<td><strong>ADC_GetCalibrationStatus</strong></td>
<td>获取指定  ADC 的校准状态</td>
</tr>
<tr>
<td><strong>ADC_SoftwareStartConvCmd</strong></td>
<td>使能或者失能指定的  ADC 的软件转换启动功能</td>
</tr>
<tr>
<td><strong>ADC_GetSoftwareStartConvStatus</strong></td>
<td>获取  ADC 软件转换启动状态</td>
</tr>
<tr>
<td>ADC_DiscModeChannelCountConfig</td>
<td>对 ADC 规则组通道配置间断模式</td>
</tr>
<tr>
<td>ADC_DiscModeCmd</td>
<td>使能或者失能指定的  ADC 规则组通道的间断模式</td>
</tr>
<tr>
<td><strong>ADC_RegularChannelConfig</strong></td>
<td>设置指定 ADC  的规则组通道，设置它们的转化顺序和采样时间</td>
</tr>
<tr>
<td>ADC_ExternalTrigConvConfig</td>
<td>使能或者失能  ADCx 的经外部触发启动转换功能</td>
</tr>
<tr>
<td><strong>ADC_GetConversionValue</strong></td>
<td>返回  近一次 ADCx 规则组的转换结果</td>
</tr>
<tr>
<td>ADC_GetDuelModeConversionValue</td>
<td>返回  近一次双 ADC 模式下的转换结果</td>
</tr>
<tr>
<td>ADC_AutoInjectedConvCmd</td>
<td>使能或者失能指定 ADC 在规则组转化后自动开始注入组转换</td>
</tr>
<tr>
<td>ADC_InjectedDiscModeCmd</td>
<td>使能或者失能指定  ADC 的注入组间断模式</td>
</tr>
<tr>
<td>ADC_ExternalTrigInjectedConvConfig</td>
<td>配置  ADCx 的外部触发启动注入组转换功能</td>
</tr>
<tr>
<td>ADC_ExternalTrigInjectedConvCmd</td>
<td>使能或者失能  ADCx 的经外部触发启动注入组转换功能</td>
</tr>
<tr>
<td>ADC_SoftwareStartinjectedConvCmd</td>
<td>使能或者失能  ADCx 软件启动注入组转换功能</td>
</tr>
<tr>
<td>ADC_GetsoftwareStartinjectedConvStatus</td>
<td>获取指定  ADC 的软件启动注入组转换状态</td>
</tr>
<tr>
<td>ADC_InjectedChannleConfig</td>
<td>设置指定 ADC  的注入组通道，设置它们的转化顺序和采样时间</td>
</tr>
<tr>
<td>ADC_InjectedSequencerLengthConfig</td>
<td>设置注入组通道的转换序列长度</td>
</tr>
<tr>
<td>ADC_SetinjectedOffset</td>
<td>设置注入组通道的转换偏移值</td>
</tr>
<tr>
<td>ADC_GetInjectedConversionValue</td>
<td>返回  ADC 指定注入通道的转换结果</td>
</tr>
<tr>
<td>ADC_AnalogWatchdogCmd</td>
<td>使能或者失能指定单个/全体，规则/注入组通道上的模拟看门狗</td>
</tr>
<tr>
<td>ADC_AnalogWatchdongThresholdsConfig</td>
<td>设置模拟看门狗的高/低阈值</td>
</tr>
<tr>
<td>ADC_AnalogWatchdongSingleChannelCon  fig</td>
<td>对单个  ADC 通道设置模拟看门狗</td>
</tr>
<tr>
<td>ADC_TampSensorVrefintCmd</td>
<td>使能或者失能温度传感器和内部参考电压通道</td>
</tr>
<tr>
<td>ADC_GetFlagStatus</td>
<td>检查制定  ADC 标志位置 1 与否</td>
</tr>
<tr>
<td>ADC_ClearFlag</td>
<td>清除  ADCx 的待处理标志位</td>
</tr>
<tr>
<td>ADC_GetITStatus</td>
<td>检查指定的  ADC 中断是否发生</td>
</tr>
<tr>
<td>ADC_ClearITPendingBit</td>
<td>清除  ADCx 的中断待处理位</td>
</tr>
</tbody>
</table>
<h3 id="rcc_adcclkconfig">函数 RCC_ADCCLKConfig<a class="headerlink" href="#rcc_adcclkconfig" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数名</th>
<th>RCC_ADCCLKConfig</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>void ADC_ADCCLKConfig(u32  RCC_ADCCLKSource)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>设置  ADC 时钟（ADCCLK）</strong></td>
</tr>
<tr>
<td>输入参数</td>
<td>RCC_ADCCLKSource: 定义 ADCCLK，该时钟源自 APB2 时钟（PCLK2）参阅  Section：RCC_ADCCLKSource 查阅更多该参数允许取值范围</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p><strong>RCC_ADCCLKSource</strong> 该参数设置了ADC时钟（ADCCLK），Table 362. 给出了该参数可取的值。</p>
<p><strong>Table 2. RCC_ADCCLKSource</strong> 值 </p>
<table>
<thead>
<tr>
<th><strong>RCC_ADCCLKSource</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>RCC_PCLK2_Div2</td>
<td>ADC 时钟 = PCLK / 2</td>
</tr>
<tr>
<td>RCC_PCLK2_Div4</td>
<td>ADC 时钟 = PCLK / 4</td>
</tr>
<tr>
<td>RCC_PCLK2_Div6</td>
<td>ADC 时钟 = PCLK / 6</td>
</tr>
<tr>
<td>RCC_PCLK2_Div8</td>
<td>ADC 时钟 = PCLK / 8</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="cm">/* Configure ADCCLK such as ADCCLK = PCLK2/6 */</span><span class="w"> </span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="n">RCC_ADCCLKConfig</span><span class="p">(</span><span class="n">RCC_PCLK2_Div6</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_regularchannelconfig">函数 ADC_RegularChannelConfig<a class="headerlink" href="#adc_regularchannelconfig" title="Permanent link">&para;</a></h3>
<p><strong>Table 3.</strong> 函数 <strong>ADC_RegularChannelConfig</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_RegularChannelConfig</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>void  ADC_RegularChannelConfig(ADC_TypeDef* ADCx, u8 ADC_Channel, u8 Rank, u8  ADC_SampleTime)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>设置指定  ADC 的规则组通道，设置它们的转化顺序和采样时间</strong></td>
</tr>
<tr>
<td>输入参数  1</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输入参数  2</td>
<td>ADC_Channel：被设置的 ADC 通道参阅章节 ADC_Channel 查阅更多该参数允许取值范围</td>
</tr>
<tr>
<td>输入参数  3</td>
<td>Rank：规则组采样顺序。取值范围 1 到 16。</td>
</tr>
<tr>
<td>输入参数  4</td>
<td>ADC_SampleTime：指定 ADC 通道的采样时间值参阅章节 ADC_SampleTime 查阅更多该参数允许取值范围</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p><strong>ADC_Channel</strong></p>
<p>参数 ADC_Channel 指定了通过调用函数 ADC_RegularChannelConfig 来设置的 ADC 通道。Table 26. 列举了 ADC_Channel 可取的值： </p>
<p><strong>Table 4. ADC_Channel</strong> 值 </p>
<table>
<thead>
<tr>
<th>ADC_Channel</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_Channel_0</td>
<td>选择 ADC 通道 0</td>
</tr>
<tr>
<td>ADC_Channel_1</td>
<td>选择 ADC 通道 1</td>
</tr>
<tr>
<td>ADC_Channel_2</td>
<td>选择 ADC 通道 2</td>
</tr>
<tr>
<td>ADC_Channel_3</td>
<td>选择 ADC 通道 3</td>
</tr>
<tr>
<td>ADC_Channel_4</td>
<td>选择 ADC 通道 4</td>
</tr>
<tr>
<td>ADC_Channel_5</td>
<td>选择 ADC 通道 5</td>
</tr>
<tr>
<td>ADC_Channel_6</td>
<td>选择  ADC 通道 6</td>
</tr>
<tr>
<td>ADC_Channel_7</td>
<td>选择  ADC 通道 7</td>
</tr>
<tr>
<td>ADC_Channel_8</td>
<td>选择  ADC 通道 8</td>
</tr>
<tr>
<td>ADC_Channel_9</td>
<td>选择  ADC 通道 9</td>
</tr>
<tr>
<td>ADC_Channel_10</td>
<td>选择  ADC 通道 10</td>
</tr>
<tr>
<td>ADC_Channel_11</td>
<td>选择  ADC 通道 11</td>
</tr>
<tr>
<td>ADC_Channel_12</td>
<td>选择  ADC 通道 12</td>
</tr>
<tr>
<td>ADC_Channel_13</td>
<td>选择  ADC 通道 13</td>
</tr>
<tr>
<td>ADC_Channel_14</td>
<td>选择  ADC 通道 14</td>
</tr>
<tr>
<td>ADC_Channel_15</td>
<td>选择  ADC 通道 15</td>
</tr>
<tr>
<td>ADC_Channel_16</td>
<td>选择  ADC 通道 16</td>
</tr>
<tr>
<td>ADC_Channel_17</td>
<td>选择  ADC 通道 17</td>
</tr>
</tbody>
</table>
<p><strong>ADC_SampleTime</strong></p>
<p>ADC_SampleTime 设定了选中通道的 ADC 采样时间。Table 27. 列举了 ADC_SampleTime 可取的值： </p>
<p><strong>Table 5. ADC_SampleTime</strong> 值： </p>
<table>
<thead>
<tr>
<th><strong>ADC_SampleTime</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_SampleTime_1Cycles5</td>
<td>采样时间为  1.5 周期</td>
</tr>
<tr>
<td>ADC_SampleTime_7Cycles5</td>
<td>采样时间为  7.5 周期</td>
</tr>
<tr>
<td>ADC_SampleTime_13Cycles5</td>
<td>采样时间为  13.5 周期</td>
</tr>
<tr>
<td>ADC_SampleTime_28Cycles5</td>
<td>采样时间为  28.5 周期</td>
</tr>
<tr>
<td>ADC_SampleTime_41Cycles5</td>
<td>采样时间为  41.5 周期</td>
</tr>
<tr>
<td>ADC_SampleTime_55Cycles5</td>
<td>采样时间为  55.5 周期</td>
</tr>
<tr>
<td>ADC_SampleTime_71Cycles5</td>
<td>采样时间为  71.5 周期</td>
</tr>
<tr>
<td>ADC_SampleTime_239Cycles5</td>
<td>采样时间为  239.5 周期</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="cm">/* Configures ADC1 Channel2 as: first converted channel with an 7.5 cycles sample time */</span><span class="w"> </span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="n">ADC_RegularChannelConfig</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_Channel_2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_SampleTime_7Cycles5</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="cm">/* Configures ADC1 Channel8 as: second converted channel with an 1.5 cycles sample time */</span><span class="w"> </span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="n">ADC_RegularChannelConfig</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_Channel_8</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_SampleTime_1Cycles5</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_init">函数 ADC_Init<a class="headerlink" href="#adc_init" title="Permanent link">&para;</a></h3>
<p><strong>Table 6.</strong> 函数 <strong>ADC_Init</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_Init</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>void ADC_Init(ADC_TypeDef<em> ADCx,  ADC_InitTypeDef</em> ADC_InitStruct)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>根据 ADC_InitStruct 中指定的参数初始化外设 ADCx 的寄存器</strong></td>
</tr>
<tr>
<td>输入参数  1</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输入参数  2</td>
<td>ADC_InitStruct：指向结构 ADC_InitTypeDef  的指针，包含了指定外设 ADC 的配置信息参阅：4.2.3 ADC_StructInit 获得 ADC_InitStruct 值的完整描述</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<h4 id="adc_inittypedef-structure">结构体ADC_InitTypeDef structure<a class="headerlink" href="#adc_inittypedef-structure" title="Permanent link">&para;</a></h4>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c1">//ADC_InitTypeDef 定义于文件“stm32f10x_adc.h”： </span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="p">{</span><span class="w"> </span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="n">u32</span><span class="w"> </span><span class="n">ADC_Mode</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="n">FunctionalState</span><span class="w"> </span><span class="n">ADC_ScanConvMode</span><span class="p">;</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="n">FunctionalState</span><span class="w"> </span><span class="n">ADC_ContinuousConvMode</span><span class="p">;</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="n">u32</span><span class="w"> </span><span class="n">ADC_ExternalTrigConv</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="n">u32</span><span class="w"> </span><span class="n">ADC_DataAlign</span><span class="p">;</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="n">u8</span><span class="w"> </span><span class="n">ADC_NbrOfChannel</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="p">}</span><span class="w"> </span><span class="n">ADC_InitTypeDef</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h4 id="adc_mode">参数 ADC_Mode<a class="headerlink" href="#adc_mode" title="Permanent link">&para;</a></h4>
<p>ADC_Mode 设置 ADC 工作在独立或者双 ADC 模式。参阅 Table 8.获得这个参数的所有成员。</p>
<p><strong>Table 4.</strong> 函数 <strong>ADC_Mode</strong> 定义 </p>
<table>
<thead>
<tr>
<th><strong>ADC_Mode</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_Mode_Independent</td>
<td>ADC1 和 ADC2 工作在独立模式</td>
</tr>
<tr>
<td>ADC_Mode_RegInjecSimult</td>
<td>ADC1 和 ADC2 工作在同步规则和同步注入模式</td>
</tr>
<tr>
<td>ADC_Mode_RegSimult_AlterTrig</td>
<td>ADC1 和  ADC2 工作在同步规则模式和交替触发模式</td>
</tr>
<tr>
<td>ADC_Mode_InjecSimult_FastInterl</td>
<td>ADC1 和  ADC2 工作在同步规则模式和快速交替模式</td>
</tr>
<tr>
<td>ADC_Mode_InjecSimult_SlowInterl</td>
<td>ADC1 和  ADC2 工作在同步注入模式和慢速交替模式</td>
</tr>
<tr>
<td>ADC_Mode_InjecSimult</td>
<td>ADC1 和 ADC2 工作在同步注入模式</td>
</tr>
<tr>
<td>ADC_Mode_RegSimult</td>
<td>ADC1 和 ADC2 工作在同步规则模式</td>
</tr>
<tr>
<td>ADC_Mode_FastInterl</td>
<td>ADC1 和 ADC2 工作在快速交替模式</td>
</tr>
<tr>
<td>ADC_Mode_SlowInterl</td>
<td>ADC1 和 ADC2 工作在慢速交替模式</td>
</tr>
<tr>
<td>ADC_Mode_AlterTrig</td>
<td>ADC1 和 ADC2 工作在交替触发模式</td>
</tr>
</tbody>
</table>
<h4 id="adc_scanconvmode">参数 ADC_ScanConvMode<a class="headerlink" href="#adc_scanconvmode" title="Permanent link">&para;</a></h4>
<p>ADC_ScanConvMode 规定了模数转换工作在扫描模式（多通道）还是单次（单通道）模式。可以设置这个参数为 ENABLE 或者 DISABLE。</p>
<h4 id="adc_continuousconvmode">参数 ADC_ContinuousConvMode<a class="headerlink" href="#adc_continuousconvmode" title="Permanent link">&para;</a></h4>
<p>ADC_ContinuousConvMode 规定了模数转换工作在连续还是单次模式。可以设置这个参数为 ENABLE 或者 DISABLE。 </p>
<h4 id="adc_externaltrigconv">参数 ADC_ExternalTrigConv<a class="headerlink" href="#adc_externaltrigconv" title="Permanent link">&para;</a></h4>
<p>ADC_ExternalTrigConv 定义了使用外部触发来启动规则通道的模数转换，这个参数可以取的值见 Table 9. </p>
<p><strong>Table 9. ADC_ExternalTrigConv</strong> 定义表 </p>
<table>
<thead>
<tr>
<th><strong>ADC_ExternalTrigConv</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_ExternalTrigConv_T1_CC1</td>
<td>选择定时器  1 的捕获比较 1 作为转换外部触发</td>
</tr>
<tr>
<td>ADC_ExternalTrigConv_T1_CC2</td>
<td>选择定时器  1 的捕获比较 2 作为转换外部触发</td>
</tr>
<tr>
<td>ADC_ExternalTrigConv_T1_CC3</td>
<td>选择定时器  1 的捕获比较 3 作为转换外部触发</td>
</tr>
<tr>
<td>ADC_ExternalTrigConv_T2_CC2</td>
<td>选择定时器  2 的捕获比较 2 作为转换外部触发</td>
</tr>
<tr>
<td>ADC_ExternalTrigConv_T3_TRGO</td>
<td>选择定时器  3 的 TRGO 作为转换外部触发</td>
</tr>
<tr>
<td>ADC_ExternalTrigConv_T4_CC4</td>
<td>选择定时器  4 的捕获比较 4 作为转换外部触发</td>
</tr>
<tr>
<td>ADC_ExternalTrigConv_Ext_IT11</td>
<td>选择外部中断线  11 事件作为转换外部触发</td>
</tr>
<tr>
<td><strong>ADC_ExternalTrigConv_None</strong></td>
<td>转换由软件而不是外部触发启动</td>
</tr>
</tbody>
</table>
<h4 id="adc_dataalign">参数 ADC_DataAlign<a class="headerlink" href="#adc_dataalign" title="Permanent link">&para;</a></h4>
<p>ADC_DataAlign 规定了 ADC 数据向左边对齐还是向右边对齐。这个参数可以取的值见 Table 10. </p>
<p><strong>Table 10. ADC_DataAlign</strong> 定义表 </p>
<table>
<thead>
<tr>
<th>ADC_DataAlign</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_DataAlign_Right</td>
<td>ADC 数据右对齐</td>
</tr>
<tr>
<td>ADC_DataAlign_Left</td>
<td>ADC 数据左对齐</td>
</tr>
</tbody>
</table>
<h4 id="adc_nbrofchannel">参数 ADC_NbrOfChannel<a class="headerlink" href="#adc_nbrofchannel" title="Permanent link">&para;</a></h4>
<p>ADC_NbreOfChannel 规定了顺序进行规则转换的 ADC 通道的数目。这个数目的取值范围是 1 到 16。</p>
<p><strong>例：</strong> </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="cm">/* Initialize the ADC1 according to the ADC_InitStructure members */</span><span class="w"> </span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="n">ADC_InitTypeDef</span><span class="w"> </span><span class="n">ADC_InitStructure</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_Mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_Mode_Independent</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ScanConvMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ContinuousConvMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DISABLE</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10"></a>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_ExternalTrigConv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_ExternalTrigConv_Ext_IT11</span><span class="p">;</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12"></a>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_DataAlign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_DataAlign_Right</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14"></a>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="n">ADC_InitStructure</span><span class="p">.</span><span class="n">ADC_NbrOfChannel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16"></a>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="n">ADC_Init</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ADC_InitStructure</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<p>注意：为了能够正确地配置每一个 ADC 通道，用户在调用 ADC_Init()之后，必须调用 ADC_ChannelConfig() 来配置每个所使用通道的转换次序和采样时间。 </p>
<h3 id="adc_cmd">函数 ADC_Cmd<a class="headerlink" href="#adc_cmd" title="Permanent link">&para;</a></h3>
<p><strong>Table 13.</strong> 函数 <strong>ADC_Cmd</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_Cmd</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>void ADC_Cmd(ADC_TypeDef* ADCx,  FunctionalState NewState)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>使能或者失能指定的  ADC</strong></td>
</tr>
<tr>
<td>输入参数  1</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输入参数  2</td>
<td>NewState：外设 ADCx 的新状态这个参数可以取：ENABLE 或者 DISABLE</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="cm">/* Enable ADC1 */</span><span class="w"> </span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="n">ADC_Cmd</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<p><strong>注意</strong>：函数 ADC_Cmd 只能在其他 ADC 设置函数之后被调用。</p>
<h3 id="adc_resetcalibration">函数 ADC_ResetCalibration<a class="headerlink" href="#adc_resetcalibration" title="Permanent link">&para;</a></h3>
<p><strong>Table 17.</strong> 函数 <strong>ADC_ResetCalibration</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_ResetCalibration</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>void ADC_ResetCalibration(ADC_TypeDef*  ADCx)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>重置指定的  ADC 的校准寄存器</strong></td>
</tr>
<tr>
<td>输入参数</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="cm">/* Reset the ADC1 Calibration registers */</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="n">ADC_ResetCalibration</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_getresetcalibrationstatus">函数 ADC_GetResetCalibrationStatus<a class="headerlink" href="#adc_getresetcalibrationstatus" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_ GetResetCalibrationStatus</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>FlagStatus  ADC_GetResetCalibrationStatus(ADC_TypeDef* ADCx)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>获取  ADC 重置校准寄存器的状态</strong></td>
</tr>
<tr>
<td>输入参数</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>ADC 重置校准寄存器的新状态（SET 或者 RESET）</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="cm">/* Get the ADC2 reset calibration registers status */</span><span class="w"> </span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="n">FlagStatus</span><span class="w"> </span><span class="n">Status</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="n">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_GetResetCalibrationStatus</span><span class="p">(</span><span class="n">ADC2</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_startcalibration">函数 ADC_StartCalibration<a class="headerlink" href="#adc_startcalibration" title="Permanent link">&para;</a></h3>
<p><strong>Table 19.</strong> 函数 <strong>ADC_StartCalibration</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_StartCalibration</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>void ADC_StartCalibration(ADC_TypeDef*  ADCx)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>开始指定  ADC 的校准状态</strong></td>
</tr>
<tr>
<td>输入参数</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="cm">/* Start the ADC2 Calibration */</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="n">ADC_StartCalibration</span><span class="p">(</span><span class="n">ADC2</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_getcalibrationstatus">函数 ADC_GetCalibrationStatus<a class="headerlink" href="#adc_getcalibrationstatus" title="Permanent link">&para;</a></h3>
<p><strong>Table 20.</strong> 函数 <strong>ADC_GetCalibrationStatus</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_GetCalibrationStatus</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>FlagStatus ADC_GetCalibrationStatus(ADC_TypeDef*  ADCx)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>获取指定  ADC 的校准程序</strong></td>
</tr>
<tr>
<td>输入参数</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>ADC 校准的新状态（SET 或者 RESET）</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="cm">/* Get the ADC2 calibration status */</span><span class="w"> </span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="n">FlagStatus</span><span class="w"> </span><span class="n">Status</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4"></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="n">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_GetCalibrationStatus</span><span class="p">(</span><span class="n">ADC2</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_softwarestartconvcmd">函数 ADC_SoftwareStartConvCmd<a class="headerlink" href="#adc_softwarestartconvcmd" title="Permanent link">&para;</a></h3>
<p><strong>Table 21.</strong> 函数 <strong>ADC_SoftwareStartConvCmd</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_SoftwareStartConvCmd</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>void  ADC_SoftwareStartConvCmd(ADC_TypeDef* ADCx, FunctionalState NewState)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>使能或者失能指定的  ADC 的软件转换启动功能</strong></td>
</tr>
<tr>
<td>输入参数  1</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输入参数  2</td>
<td>NewState：指定 ADC 的软件转换启动新状态这个参数可以取：ENABLE 或者 DISABLE</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="cm">/* Start by software the ADC1 Conversion */</span><span class="w"> </span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="n">ADC_SoftwareStartConvCmd</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">);</span><span class="w"> </span><span class="c1">//软件触发</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_getflagstatus">函数 ADC_GetFlagStatus<a class="headerlink" href="#adc_getflagstatus" title="Permanent link">&para;</a></h3>
<p><strong>Table 48.</strong> 函数 <strong>ADC_GetFlagStatus</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_GetFlagStatus</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>FlagStatus ADC_GetFlagStatus(ADC_TypeDef*  ADCx, u8 ADC_FLAG)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>检查制定  ADC 标志位置 1 与否</strong></td>
</tr>
<tr>
<td>输入参数  1</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输入参数  2</td>
<td>ADC_FLAG：指定需检查的标志位   参阅章节  ADC_FLAG 查阅更多该参数允许取值范围</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>无</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p><strong>ADC_FLAG</strong> </p>
<p>Table 49. 给出了 ADC_FLAG 的值 </p>
<p><strong>Table 49. ADC_FLAG</strong> 的值 </p>
<table>
<thead>
<tr>
<th><strong>ADC_AnalogWatchdog</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_FLAG_AWD</td>
<td>模拟看门狗标志位</td>
</tr>
<tr>
<td><strong>ADC_FLAG_EOC</strong></td>
<td>转换结束标志位</td>
</tr>
<tr>
<td>ADC_FLAG_JEOC</td>
<td>注入组转换结束标志位</td>
</tr>
<tr>
<td>ADC_FLAG_JSTRT</td>
<td>注入组转换开始标志位</td>
</tr>
<tr>
<td>ADC_FLAG_STRT</td>
<td>规则组转换开始标志位</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="cm">/* Test if the ADC1 EOC flag is set or not */</span><span class="w"> </span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="n">FlagStatus</span><span class="w"> </span><span class="n">Status</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="n">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_GetFlagStatus</span><span class="p">(</span><span class="n">ADC1</span><span class="p">,</span><span class="w"> </span><span class="n">ADC_FLAG_EOC</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h3 id="adc_getconversionvalue">函数 ADC_GetConversionValue<a class="headerlink" href="#adc_getconversionvalue" title="Permanent link">&para;</a></h3>
<p><strong>Table 29.</strong> 函数 <strong>ADC_GetConversionValue</strong> </p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>ADC_GetConversionValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数原形</td>
<td>u16  ADC_GetConversionValue(ADC_TypeDef* ADCx)</td>
</tr>
<tr>
<td>功能描述</td>
<td><strong>返回  近一次 ADCx 规则组的转换结果</strong></td>
</tr>
<tr>
<td>输入参数</td>
<td>ADCx：x 可以是 1 或者 2 来选择 ADC  外设 ADC1 或  ADC2</td>
</tr>
<tr>
<td>输出参数</td>
<td>无</td>
</tr>
<tr>
<td>返回值</td>
<td>转换结果</td>
</tr>
<tr>
<td>先决条件</td>
<td>无</td>
</tr>
<tr>
<td>被调用函数</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>例： </p>
<div class="language-C highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="cm">/*Returns the ADC1 Master data value of the last converted channel*/</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="n">u16</span><span class="w"> </span><span class="n">DataValue</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="n">DataValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADC_GetConversionValue</span><span class="p">(</span><span class="n">ADC1</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 2, 2023</span>
      
        <br>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 28, 2023</span>
      
    
  </small>
</div>





  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
        data-repo="Sakura-Ji/Comment"
        data-repo-id="R_kgDOJx0I-g"
        data-category="Announcements"
        data-category-id="DIC_kwDOJx0I-s4CZqEw"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
  </script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>


                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../USART/" class="md-footer__link md-footer__link--prev" aria-label="上一页: STM32之USART串口通信">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                STM32之USART串口通信
              </div>
            </div>
          </a>
        
        
          
          <a href="../I2C/" class="md-footer__link md-footer__link--next" aria-label="下一页: STM32之I2C通信">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                STM32之I2C通信
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Sakura-Ji CC-BY-4.0
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/Sakura-Ji" target="_blank" rel="noopener" title="Github | Sakura-Ji" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "search.share", "navigation.footer", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.94c44541.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../javascripts/lovestart.js"></script>
      
        <script src="../../../javascripts/Music.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>